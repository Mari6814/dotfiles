# ~/.bashrc: executed by bash(1) for non-login shells.
export SOURCED="$BASH_SOURCE@`date +%H%m%S`:$SOURCED"

# Default editor is vim. The script changes that later.
export EDITOR=vim

# append to the history file, don't overwrite it
shopt -s histappend

# for setting history length see HISTSIZE and HISTFILESIZE in bash(1)
HISTSIZE=10000
HISTFILESIZE=20000

# check the window size after each command and, if necessary,
# update the values of LINES and COLUMNS.
shopt -s checkwinsize

# If set, the pattern "**" used in a pathname expansion context will
# match all files and zero or more directories and subdirectories.
shopt -s globstar

# CD by directly typing in the path to a directory
shopt -s autocd

# Expands symbolic representations of paths
shopt -s direxpand

# enable programmable completion features (you don't need to enable
# this, if it's already enabled in /etc/bash.bashrc and /etc/profile
# sources /etc/bash.bashrc).
if ! shopt -oq posix; then
  if [ -f /usr/share/bash-completion/bash_completion ]; then
    . /usr/share/bash-completion/bash_completion
  elif [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
  fi
fi

# Set up the user's "local" directory
export LOCAL="$HOME/.local"
[ -d "$LOCAL/bin" ] && export PATH="$PATH:$LOCAL/bin"

# Default editor
if [ -x `which nvim` ]; then
    export EDITOR=nvim
elif [ -x `which vim` ]; then
	export EDITOR=vim
elif [ -x `which vi` ]; then
	export EDITOR=vi
fi

# Dynamically load bashrc plugins from the local directory
if [ -d "$LOCAL/bash-plugins" ]; then
    for plugin in "$LOCAL/bash-plugins/"*.sh; do
        if [ -f "$plugin" ]; then
            export BASH_PLUGINS_LOADED="$plugin:$BASH_PLUGINS_LOADED"
            source "$plugin"
        fi
    done
fi

if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi

if [ -d "$HOME/.config/composer" ]; then
    export PATH="$HOME/.config/composer/vendor/bin:$PATH"
fi
